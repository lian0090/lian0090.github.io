<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>
        
        Crayon Meets Ruby | Aram Kocharyan
        
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/lib/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/lib/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/lib/bootstrap/css/docs.css" rel="stylesheet">
    <link href="/lib/google-code-prettify/prettify.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="/lib/html5shiv.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="/assets/ico/favicon.png">

</head>

<body data-spy="scroll" data-target=".bs-docs-sidebar">
<!-- Navbar
    ================================================== -->
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="/">Aram Kocharyan</a>

            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li class="">
                        <a href="/projects">Projects</a>
                    </li>
                    <li class="">
                        <a href="/projects/crayon.html">Crayon</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="container main-container">
    <article class="single">
    <div class="meta">
        <h1 class="title">Crayon Meets Ruby</h1>

        <span class="date">28 Jan 2012</span>
    </div>

    <div id="post">
        In 1.7.24 I've added Ruby and Ruby on Rails as a language on Crayon. Even cooler, I've added the <code>&lt;% ... %&gt;</code> and similar delimiter tags for <a href="http://en.wikipedia.org/wiki/ERuby">eRuby/RHTML</a>. Using Multiple Language Highlighting in Crayon, you can choose HTML as the base language with the <code>lang="html"</code> attribute or the <code>$[html]...[/html]</code> Mini Tag and then through in some eRuby syntax. The red bits are Ruby, all else is XHTML. Note you can do the same thing with PHP tags, CSS tags and JavaScript tags.

<a href="http://localsite.com/ak/wp-content/uploads/2012/01/rhtml.png"><img src="http://localsite.com/ak/wp-content/uploads/2012/01/rhtml.png" alt="" title="rhtml" width="594" height="290" class="aligncenter size-full wp-image-787" /></a>

Here's the shortcode I used:

<pre class="crayon-plain-tag">$[html]
Some <strong>HTML</strong> first.

<ul style="color:red;">
<% 3.times do %>

  <li>list item</li>

<% end %>

% $s("ewfwe")

</ul>

<%= "print something" %>

Tada.
[/html]</pre>

Here's some Ruby:

<a href="http://localsite.com/ak/wp-content/uploads/2012/01/ruby.png"><img src="http://localsite.com/ak/wp-content/uploads/2012/01/ruby.png" alt="" title="ruby" width="595" height="578" class="aligncenter size-full wp-image-794" /></a>

And the shortcode:

<pre class="crayon-plain-tag">$[rb toolbar="always"]
def create_set_and_get(initial_value=0) # Note the default value of 0
  closure_value = initial_value
  return Proc.new {|x| closure_value = x}, Proc.new { closure_value }
end
 
setter, getter = create_set_and_get  # ie. returns two values
setter.call(21)
getter.call # => 21
 
#You can also use a parameter variable as a binding for the closure. 
#So the above can be rewritten as...
 
def create_set_and_get(closure_value=0)
  return proc {|x| closure_value = x } , proc { closure_value }
end

proc {|arg| print arg}
Proc.new {|arg| print arg}
lambda {|arg| print arg}
 
# introduced in Ruby 1.9
->(arg) {print arg}

# In an object instance variable (denoted with '@'), remember a block.
def remember(&a_block)
  @block = a_block
end
 
# Invoke the above method, giving it a block which takes a name.
remember {|name| puts "Hello, #{name}!"}
 
# When the time is right (for the object) -- call the closure!
@block.call("Jon")
# => "Hello, Jon!"

[/rb]</pre>

    </div>
</article>

</div>

<!-- Footer
================================================== -->
<footer class="footer">
    <div class="container">
        <p>Aram Kocharyan, <span class="date">2015</span>.</p>

        <p>Built with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> + <a
                href="http://twitter.github.io/bootstrap/" target="_blank">Bootstrap</a>. Hosted at <a
                href="http://pages.github.com/">GitHub Pages.</a></p>
    </div>
</footer>

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="/lib/jquery.js"></script>
<script src="/lib/bootstrap/js/bootstrap.min.js"></script>

<script src="/lib/holder.js"></script>
<script src="/lib/google-code-prettify/prettify.js"></script>

<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38031779-1']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();

</script>

</body>
</html>